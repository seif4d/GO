<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SYSTEM STATUS | 404</title>
    <style>
        :root {
            --bg: #050510;
            --terminal-bg: rgba(10, 10, 26, 0.95);
            --primary: #00f2fe; /* Cyan */
            --success: #00ff41; /* Hacker Green */
            --error: #ff0055; /* Glitch Red */
            --text: #e0e0e0;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background-color: var(--bg);
            font-family: 'Courier New', Courier, monospace; /* خط التيرمينال */
            color: var(--text);
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            flex-direction: column;
        }

        /* خلفية تشويش خفيفة */
        .scanline {
            width: 100%;
            height: 100px;
            z-index: 10;
            background: linear-gradient(0deg, rgba(0,0,0,0) 0%, rgba(255, 255, 255, 0.02) 50%, rgba(0,0,0,0) 100%);
            opacity: 0.1;
            position: absolute;
            bottom: 100%;
            animation: scanline 10s linear infinite;
            pointer-events: none;
        }
        @keyframes scanline {
            0% { bottom: 100%; }
            100% { bottom: -100%; }
        }

        /* حاوية التيرمينال */
        .terminal-window {
            width: 90%;
            max-width: 600px;
            background: var(--terminal-bg);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            box-shadow: 0 0 40px rgba(0, 242, 254, 0.1);
            padding: 20px;
            position: relative;
        }

        .terminal-header {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding-bottom: 10px;
        }

        .dot { width: 12px; height: 12px; border-radius: 50%; }
        .red { background-color: #ff5f56; }
        .yellow { background-color: #ffbd2e; }
        .green { background-color: #27c93f; }

        .console-output {
            min-height: 150px;
            font-size: 1rem;
            line-height: 1.5;
            text-align: left; /* التيرمينال دايما شمال */
            direction: ltr;
        }

        .log-line {
            margin-bottom: 5px;
            opacity: 0;
            animation: fadeIn 0.1s forwards;
        }
        @keyframes fadeIn { to { opacity: 1; } }

        .prefix { color: var(--primary); margin-right: 10px; }
        .blink { animation: blink 1s infinite; }
        @keyframes blink { 50% { opacity: 0; } }

        /* حالات خاصة */
        .status-success { color: var(--success); text-shadow: 0 0 10px var(--success); }
        .status-error { color: var(--error); text-shadow: 0 0 10px var(--error); }

        /* زر العودة (يظهر فقط عند الخطأ) */
        .back-btn {
            display: none;
            margin-top: 20px;
            text-decoration: none;
            color: var(--bg);
            background: var(--primary);
            padding: 10px 20px;
            font-weight: bold;
            border: none;
            cursor: pointer;
            text-align: center;
            width: 100%;
            transition: 0.3s;
        }
        .back-btn:hover {
            background: var(--text);
            box-shadow: 0 0 15px white;
        }

        /* Glitch Effect للنص الكبير */
        .glitch-text {
            display: none;
            font-size: 3rem;
            font-weight: bold;
            text-align: center;
            color: var(--error);
            position: relative;
            margin-bottom: 20px;
            animation: glitch-anim 1s infinite;
        }
        @keyframes glitch-anim {
            0% { text-shadow: -2px 0 var(--primary), 2px 0 var(--error); }
            25% { text-shadow: 2px 0 var(--primary), -2px 0 var(--error); }
            50% { text-shadow: -2px 0 var(--primary), 2px 0 var(--error); }
            75% { text-shadow: 2px 0 var(--primary), -2px 0 var(--error); }
            100% { text-shadow: -2px 0 var(--primary), 2px 0 var(--error); }
        }

    </style>
</head>
<body>

    <div class="scanline"></div>

    <div class="terminal-window" id="terminal">
        <div class="terminal-header">
            <div class="dot red"></div>
            <div class="dot yellow"></div>
            <div class="dot green"></div>
            <span style="margin-left: auto; font-size: 0.8rem; color: #555;">ROOT@GO-SYSTEM:~</span>
        </div>

        <div class="glitch-text" id="errorCode">404 ERROR</div>

        <div class="console-output" id="console">
            <!-- Logs will appear here -->
        </div>

        <a href="/GO/" class="back-btn" id="backBtn">RETURN TO NEXUS</a>
    </div>

    <script>
        // ⚠️ هام: تأكد من اسم المستودع
        const repoName = "/GO"; 
        const consoleDiv = document.getElementById('console');
        
        // دالة لكتابة سطر في التيرمينال
        function log(text, type = 'normal') {
            const line = document.createElement('div');
            line.className = 'log-line';
            
            let prefix = '>';
            if (type === 'process') prefix = '>>';
            if (type === 'success') prefix = '[OK]';
            if (type === 'error') prefix = '[ERR]';
            
            line.innerHTML = `<span class="prefix">${prefix}</span> ${text}`;
            
            if (type === 'success') line.classList.add('status-success');
            if (type === 'error') line.classList.add('status-error');
            
            consoleDiv.appendChild(line);
            consoleDiv.scrollTop = consoleDiv.scrollHeight; // Auto scroll
        }

        async function init() {
            log("INITIALIZING PROTOCOL v2.4...", "process");
            await new Promise(r => setTimeout(r, 400));
            
            const path = window.location.pathname;
            // استخراج الكود القصير
            let shortCode = path.replace(repoName, "").replace(/^\//, "").replace(/\/$/, "");

            if (!shortCode) {
                log("NO TARGET DETECTED. REDIRECTING TO ROOT...", "process");
                setTimeout(() => window.location.replace(repoName + "/"), 1000);
                return;
            }

            log(`DETECTED HASH: "${shortCode}"`);
            await new Promise(r => setTimeout(r, 600)); // Suspense...
            
            log("ACCESSING SECURE DATABASE...", "process");
            
            try {
                const response = await fetch(repoName + '/links.json');
                if (!response.ok) throw new Error("Database Offline");
                
                const links = await response.json();
                
                await new Promise(r => setTimeout(r, 500));

                if (links[shortCode]) {
                    // السيناريو الناجح
                    log("TARGET ACQUIRED.", "success");
                    log(`DECRYPTING URL: ${links[shortCode]}...`);
                    log("ESTABLISHING UPLINK...", "success");
                    
                    document.getElementById('terminal').style.borderColor = "var(--success)";
                    document.getElementById('terminal').style.boxShadow = "0 0 30px rgba(0, 255, 65, 0.2)";

                    setTimeout(() => {
                        window.location.replace(links[shortCode]);
                    }, 1000); // 1s delay to see success
                } else {
                    throw new Error("Invalid Hash");
                }

            } catch (error) {
                // سيناريو الخطأ (الرابط غير موجود)
                await new Promise(r => setTimeout(r, 400));
                log("CRITICAL ERROR: HASH NOT FOUND", "error");
                log("CONNECTION TERMINATED.", "error");

                // تفعيل تأثيرات الخطأ
                document.getElementById('errorCode').style.display = 'block';
                document.getElementById('terminal').style.borderColor = "var(--error)";
                document.getElementById('terminal').style.boxShadow = "0 0 30px rgba(255, 0, 85, 0.3)";
                document.getElementById('backBtn').style.display = 'block';
            }
        }

        // بدء التشغيل
        init();

    </script>
</body>
</html>
